{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ball.js","webpack:///./src/bar.js","webpack:///./src/bin.js","webpack:///./src/configuration.js","webpack:///./src/display.js","webpack:///./src/distribution.js","webpack:///./src/index.js","webpack:///./src/interaction.js","webpack:///./src/moveable_shape.js","webpack:///./src/star.js","webpack:///./src/static_shape.js","webpack:///./src/tutorial.js","webpack:///./util/checks.js","webpack:///./util/event_listeners.js","webpack:///./util/formulas.js","webpack:///./util/search_configuration.js"],"names":["Ball","label","pos","radius","boundingBox","ctx","ballType","y","recalculateBoundingBox","newPos","lineWidth","beginPath","arc","Math","PI","stroke","font","fillText","MoveableShape","Bar","width","height","moveTo","lineTo","fill","Bin","bounds","numPos","ballCountPos","binType","items","length","StaticShape","Configuration","staticShapes","otherShapes","checkBothShapes","counter","i","moveableType","staticType","forEach","staticShape","draw","moveableShape","Display","restriction","totalConfigurations","distribution","Distribution","usesStarsAndBars","numMoveableShapes","document","getElementsByClassName","innerHTML","numStaticShapes","moveableShapes","setMoveableShapes","setStaticShapes","interaction","Interaction","configurations","determineFormula","addToConfigurations","canvasEl","newValue","getElementById","addEventListener","event","preventDefault","target","value","starsAndBars","addMoveableShape","removeMoveableShape","clearRect","clientWidth","clearConfigurations","calculateFormula","start","addStaticShape","removeStaticShape","updateValues","resetState","changeDisplay","resetInterface","remove","setUp","updateDisplayCount","changeLabels","moveableShapePosition","staticShapePosition","binBounds","barCountPos","barWidth","barHeight","num","setMoveableShapePosition","window","innerWidth","setStaticShapePosition","countPos","Array","parseInt","Star","push","ballLabel","binLabel","innerText","getContext","result","display","tutorial","Tutorial","animation","currentStep","hideAllTutorials","finishTutorial","checkInteractiveStep","checkSubmissionStep","nextStep","checkBounds","offsetX","offsetY","requestAnimationFrame","isClicked","shape","stopPropagation","cancelAnimationFrame","flag","otherShape","addItem","removeItem","EventListeners","updateCount","pop","checkConstraints","reduce","acc","checkStaticShapes","determineCases","checkEachConfiguration","checkMoveableShapes","checkIDSurjective","violateRestriction","cloneStaticShapes","newStaticShapes","newStaticShape","newMoveableShapes","Object","assign","create","getPrototypeOf","x","topLeft","topRight","bottomRight","bottomLeft","gap","closePath","item","bound1","bound2","bound3","bound4","includes","checkItem","index","indexOf","splice","totalSteps","classList","getElementsByTagName","add","removeDarkScreen","addDarkScreen","modifyScreen","toLowerCase","shape1","shape2","checkForSimilarShapes","checkAgainstOtherShapes","checkTotalShapes","checkForSimilarLength","items1","items2","checkCallback","labels","Boolean","checkInjective","checkSurjective","shapes","addEventsToCases","case1","case2","case3","case4","restart","addEventsToRules","rule1","rule2","rule3","addEventsToButtons","addConfiguration","appendPartition","checkCompletion","setTimeout","stopImmediatePropagation","removeFadeIn","scrollIntoView","setAttribute","removeAttribute","newCanvas","createElement","subtractHeight","scaleNewCanvas","scrollTop","lastChild","offsetTop","history","scale","appendChild","getBoundingClientRect","rules","calculateDDUnrestricted","calculateDDInjective","calculateDDSurjective","calculateDIUnrestricted","calculateDIInjective","calculateDISurjective","calculateIDUnrestricted","calculateIDInjective","calculateIDSurjective","calculateIIUnrestricted","calculateIIInjective","calculateIISurjective","k","n","pow","calculateFactorial","calculateStirlingNumber","calculateBinomialCoefficient","numbers","getNumbersArray","formula","calculatePartition","sumResults","floor","total","findDDUConfiguration","staticLength","binsArray","createBins","refreshBins","j","slice","findDDIConfiguration","idx","bins","newBins","newBin"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import MoveableShape from './moveable_shape';\n\nclass Ball extends MoveableShape {\n    constructor(label, pos, radius) {\n        const boundingBox = [\n            [pos[0] - radius, pos[1] - radius],\n            [pos[0] + radius, pos[1] - radius],\n            [pos[0] + radius, pos[1] + radius],\n            [pos[0] - radius, pos[1] + radius]\n        ];\n        super(pos, boundingBox);\n        this.label = label;\n        this.radius = radius;\n    }\n\n    draw(ctx, ballType, y) {\n        if(typeof ctx === \"object\") { //ctx is a number when clicked so I need to have a conditional here\n            this.recalculateBoundingBox();\n\n            let newPos = this.pos[1];\n            if (this.pos[1] > y) {\n                newPos -= y * 2.5;\n            }\n\n            ctx.lineWidth = 3;\n            ctx.beginPath();\n            ctx.arc(this.pos[0], newPos, this.radius, 0, Math.PI * 2);\n            ctx.stroke();\n\n            if(ballType === \"distinguishable\") {\n                ctx.font = \"24px arial\";\n                ctx.fillText(this.label, this.pos[0] - 8, newPos + 8);\n            }\n        }\n    }\n\n    recalculateBoundingBox() {\n        this.boundingBox = [\n            [this.pos[0] - this.radius, this.pos[1] - this.radius],\n            [this.pos[0] + this.radius, this.pos[1] - this.radius],\n            [this.pos[0] + this.radius, this.pos[1] + this.radius],\n            [this.pos[0] - this.radius, this.pos[1] + this.radius]\n        ];\n    }\n}\n\nexport default Ball;","import MoveableShape from './moveable_shape';\n\nclass Bar extends MoveableShape {\n    constructor(pos, width, height) {\n        const boundingBox = [\n            [pos[0], pos[1]],\n            [pos[0] + width, pos[1]],\n            [pos[0] + width, pos[1] + height],\n            [pos[0], pos[1] + height]\n        ];\n        super(pos, boundingBox);\n        this.width = width;\n        this.height = height;\n    }\n\n    draw(ctx) {\n        if(typeof ctx === \"object\") {\n            this.recalculateBoundingBox();\n            ctx.beginPath();\n            ctx.moveTo(this.pos[0], this.pos[1]);\n            ctx.lineTo(this.pos[0] + this.width, this.pos[1]);\n            ctx.lineTo(this.pos[0] + this.width, this.pos[1] + this.height);\n            ctx.lineTo(this.pos[0], this.pos[1] + this.height);\n            ctx.lineTo(this.pos[0], this.pos[1]);\n            ctx.stroke();\n            ctx.fill();\n        }\n    }\n\n    recalculateBoundingBox() {\n        this.boundingBox = [\n            [this.pos[0], this.pos[1]],\n            [this.pos[0] + this.width, this.pos[1]],\n            [this.pos[0] + this.width, this.pos[1] + this.height],\n            [this.pos[0], this.pos[1] + this.height]\n        ];\n    }\n}\n\nexport default Bar;","import StaticShape from './static_shape';\n\nclass Bin extends StaticShape {\n    constructor(label, pos, bounds, numPos, ballCountPos) {\n        const boundingBox = [\n            [pos[0], pos[1]],\n            [pos[0] + bounds[0] + bounds[1], pos[1]],\n            [pos[0] + bounds[1], pos[1] + bounds[2]],\n            [pos[0] + bounds[0], pos[1] + bounds[2]]\n        ];\n        super(pos, boundingBox);\n        this.label = label;\n        this.bounds = bounds //[X1, X2, Y]\n        this.numPos = numPos;\n        this.ballCountPos = ballCountPos;\n    }\n\n    // checkCollision(x, y) {\n    //     let line1 = [this.boundingBox[1][0] - this.boundingBox[0][0], this.boundingBox[1][1] - this.boundingBox[0][1]];\n    //     let line2 = [this.boundingBox[2][0] - this.boundingBox[1][0], this.boundingBox[2][1] - this.boundingBox[1][1]];\n    //     let line3 = [this.boundingBox[3][0] - this.boundingBox[2][0], this.boundingBox[3][1] - this.boundingBox[2][1]];\n\n    //     if(x === line1[0], y === line1[1]) {\n    //         this.pos = line1;\n    //     } else if(x === line2[0], line2[1]) {\n    //         this.pos = line2;\n    //     } else if(x === line3[0], line3[1]) {\n\n    //     }\n    // }\n\n    draw(ctx, binType, y) {\n        if (typeof ctx === \"object\") {\n            this.recalculateBoundingBox();\n            let newPos = this.pos[1];\n            if(this.pos[1] > y) {\n                newPos = y;\n            }\n\n            ctx.lineWidth = 3;\n            ctx.beginPath();\n            ctx.moveTo(this.pos[0], newPos);\n            ctx.lineTo(this.pos[0] + this.bounds[0], newPos + this.bounds[2]);\n            ctx.lineTo(this.pos[0] + this.bounds[1], newPos + this.bounds[2]);\n            ctx.lineTo(this.pos[0] + this.bounds[0] + this.bounds[1], newPos);\n            \n            ctx.stroke();\n\n            ctx.font = \"24px arial\";\n            if(binType === \"distinguishable\") {\n                ctx.fillText(this.label, this.pos[0] + this.numPos[0], newPos + this.numPos[1]);\n            }\n\n            ctx.fillText(this.items.length, this.pos[0] + this.bounds[1] - this.ballCountPos[0], newPos + this.bounds[2] + this.ballCountPos[1]);\n        }\n    }\n\n    recalculateBoundingBox() {\n        this.boundingBox = [\n            [this.pos[0], this.pos[1]],\n            [this.pos[0] + this.bounds[0] + this.bounds[1], this.pos[1]],\n            [this.pos[0] + this.bounds[1], this.pos[1] + this.bounds[2]],\n            [this.pos[0] + this.bounds[0], this.pos[1] + this.bounds[2]]\n        ];\n    }\n}\n\nexport default Bin;","//true values denote there exists a partition, false values denote there doesn't not exist a partition\nclass Configuration {\n    constructor(staticShapes) {\n        this.staticShapes = staticShapes;\n    }\n\n    //this function checks if there is a parititon. \n    //It matches each input's bin with each partition's \n    //bin to check if they have the same configuration. \n    //A counter variable keeps track of simiarities: if \n    //the counter equals to the total # of bins, then this \n    //implies that the partition already exists or the parition\n    //does not adhere to the rules\n    checkStaticShapes(otherShapes, checkBothShapes) {\n        let counter = 0;\n        for(let i = 0; i < this.staticShapes.length; i++) {\n            if (checkBothShapes(otherShapes[i], this.staticShapes, i)) {\n                counter++;\n            }\n        }\n\n        return counter === this.staticShapes.length;\n    }\n\n    draw(ctx, moveableType, staticType, y) {\n        this.staticShapes.forEach(staticShape => {\n            staticShape.draw(ctx, staticType, y);\n            staticShape.items.forEach(moveableShape => moveableShape.draw(ctx, moveableType, y))\n        });\n    }\n}\n\nexport default Configuration;","import Interaction from \"./interaction\";\nimport { determineFormula } from '../util/formulas';\nimport Distribution from './distribution';\n\n//this class is concerned with the presentation/event handling of the interface\nclass Display {\n    constructor(moveableType, staticType, restriction, totalConfigurations, ctx) {\n        this.moveableType = moveableType;\n        this.staticType = staticType;\n        this.restriction = restriction;\n        this.totalConfigurations = totalConfigurations;\n        this.ctx = ctx;\n        this.distribution = new Distribution();\n        this.distribution.usesStarsAndBars(this.moveableType, this.staticType, this.restriction);\n        const numMoveableShapes = document.getElementsByClassName(\"num-balls\")[0].innerHTML;\n        const numStaticShapes = document.getElementsByClassName(\"num-bins\")[0].innerHTML;\n        const moveableShapes = this.distribution.setMoveableShapes(numMoveableShapes);\n        const staticShapes = this.distribution.setStaticShapes(numStaticShapes);\n        this.interaction = new Interaction(moveableShapes, staticShapes);\n    }\n\n    addToConfigurations() {\n        document.getElementsByClassName(\"configuration-count\")[0].innerHTML = `Configurations: ${this.interaction.configurations.length}/${this.totalConfigurations}`;\n    }\n\n    //account for stars and bars later\n    calculateFormula() {\n        this.totalConfigurations = determineFormula(this.moveableType, this.staticType, this.restriction)(this.interaction.moveableShapes.length, this.interaction.staticShapes.length);\n        this.addToConfigurations();\n    }\n\n    updateValues() {\n        const numMoveableShapes = document.getElementsByClassName(\"num-balls\")[0].innerHTML;\n        const numStaticShapes = document.getElementsByClassName(\"num-bins\")[0].innerHTML;\n        const moveableShapes = this.distribution.setMoveableShapes(numMoveableShapes);\n        const staticShapes = this.distribution.setStaticShapes(numStaticShapes);\n        this.interaction.setMoveableShapes(moveableShapes);\n        this.interaction.setStaticShapes(staticShapes);\n    }\n\n    updateCount(canvasEl) {\n        let newValue;\n\n        document.getElementById(\"ball-count\").addEventListener(\"input\", event => {\n            event.preventDefault();\n            newValue = event.target.value;\n            document.getElementsByClassName(\"num-balls\")[0].innerHTML = newValue;\n            if (this.distribution.starsAndBars) document.getElementsByClassName(\"num-balls\")[0].innerHTML -= 1;\n            let moveableShape;\n\n            if(newValue > this.interaction.moveableShapes.length) {\n                moveableShape = this.distribution.addMoveableShape(this.interaction.moveableShapes.length);\n                this.interaction.addMoveableShape(moveableShape);\n            } else {\n                this.interaction.removeMoveableShape();\n                this.ctx.clearRect(0, 0, canvasEl.clientWidth, canvasEl.height);\n            }\n\n            this.clearConfigurations();\n            this.calculateFormula();\n            this.interaction.configurations = [];\n            this.addToConfigurations();\n            this.start();\n        });\n\n        document.getElementById(\"bin-count\").addEventListener(\"input\", event => {\n            newValue = event.target.value;\n            document.getElementsByClassName(\"num-bins\")[0].innerHTML = newValue;\n            let staticShape;\n            let length = this.interaction.staticShapes.length;\n\n            if(this.distribution.starsAndBars) length -= 1;\n\n            if(newValue > length) {\n                staticShape = this.distribution.addStaticShape(this.interaction.staticShapes.length);\n                this.interaction.addStaticShape(staticShape);\n            } else {\n                this.interaction.removeStaticShape();\n                this.ctx.clearRect(0, 0, canvasEl.clientWidth, canvasEl.height);\n            }\n\n            this.clearConfigurations();\n            this.calculateFormula();\n            this.interaction.configurations = [];\n            this.addToConfigurations();\n            this.start();\n        });\n    }\n\n    resetState() {\n        this.updateValues();\n        const canvasEl = document.getElementById(\"canvas\");\n        this.ctx.clearRect(0, 0, canvasEl.clientWidth, canvasEl.height);\n    }\n\n    resetInterface() {\n        this.resetState();\n        this.interaction.configurations = [];\n        this.addToConfigurations();\n        this.clearConfigurations();\n    }\n\n    restart() {\n        this.changeDisplay();\n        this.calculateFormula();\n        this.resetInterface();\n        this.start();\n    }\n\n    clearConfigurations() {\n        const configurations = document.getElementsByClassName(\"configuration\");\n        for(let i = configurations.length - 1; i >= 0; i--) {\n            configurations[i].remove();\n        }\n    }\n\n    changeDisplay() {\n        if (this.distribution.starsAndBars !== this.distribution.usesStarsAndBars(this.moveableType, this.staticType, this.restriction)) {\n            this.distribution.starsAndBars = this.distribution.usesStarsAndBars(this.moveableType, this.staticType, this.restriction);\n            this.distribution.setUp();\n            this.distribution.updateDisplayCount(this.interaction.moveableShapes.length);\n            this.updateValues();\n            this.distribution.changeLabels();\n        }\n    }\n\n    start() {\n        this.interaction.draw(this.ctx, this.moveableType, this.staticType);\n    }\n}\n\nexport default Display;","import Ball from './ball';\nimport Bin from './bin';\nimport Bar from './bar';\nimport Star from './star';\n\nclass Distribution {\n    constructor() {\n        this.starsAndBars = false;\n        this.moveableShapePosition;\n        this.staticShapePosition;\n        this.radius;\n        this.binBounds;\n        this.ballCountPos;\n        this.barCountPos;\n        this.barWidth;\n        this.barHeight;\n        this.setUp();\n    }\n\n    usesStarsAndBars(moveableType, staticType, restriction) {\n        return moveableType === \"indistinguishable\" && staticType === \"distinguishable\" && (restriction === \"unrestricted\" || restriction === \"surjective\");\n    }\n\n    setMoveableShapePosition() {\n        if(this.starsAndBars) {\n            this.moveableShapePosition = [100, 200];\n        } else {\n            this.moveableShapePosition = [100, 50];\n        }\n    }\n\n    setStaticShapePosition(num) {\n        if (this.starsAndBars) {\n            this.staticShapePosition = [40 * num * 1.2, 80 * num * 1.2];\n        } else {\n            this.staticShapePosition = [49 * num, 88 * num];\n        }\n    }\n\n    setUp() {\n        this.setMoveableShapePosition();\n        \n        if (window.innerWidth <= 1500) {\n            this.setStaticShapePosition(3);\n            this.binBounds = [25, 100, 187.5];\n            this.radius = 25;\n            this.ballCountPos = [58, 85];\n            this.barCountPos = [65, 120];\n            this.countPos = [45, 25];\n            this.barWidth = 8;\n            this.barHeight = 50;\n        } else if (window.innerWidth > 1500 && window.innerWidth <= 1850) {\n            this.setStaticShapePosition(3.5);\n            this.binBounds = [32, 128, 240];\n            this.radius = 30;\n            this.ballCountPos = [75, 120];\n            this.barCountPos = [75, 150];\n            this.countPos = [52, 30];\n            this.barWidth = 10;\n            this.barHeight = 60;\n        } else {\n            this.setStaticShapePosition(5);\n            this.binBounds = [40, 160, 300];\n            this.radius = 35;\n            this.ballCountPos = [95, 150];\n            this.barCountPos = [90, 150];\n            this.countPos = [65, 30];\n            this.barWidth = 10;\n            this.barHeight = 60;\n        }\n    }\n\n    setMoveableShapes(numMoveableShapes) {\n        const moveableShapes = new Array(parseInt(numMoveableShapes));\n\n        if(this.starsAndBars) {\n            for (let i = 0; i < moveableShapes.length; i++) {\n                moveableShapes[i] = new Bar([this.moveableShapePosition[0] * (i + 1), this.moveableShapePosition[1]], this.barWidth, this.barHeight);\n            }\n        } else {\n            for (let i = 0; i < moveableShapes.length; i++) {\n                moveableShapes[i] = new Ball(i + 1, [this.moveableShapePosition[0] * (i + 1), this.moveableShapePosition[1]], this.radius);\n            }\n        }\n\n        return moveableShapes;\n    }\n\n    setStaticShapes(numStaticShapes) {\n        const staticShapes = new Array(parseInt(numStaticShapes));\n        if(this.starsAndBars) {\n            for (let i = 0; i < staticShapes.length; i++) {\n                staticShapes[i] = new Star([this.staticShapePosition[0] * i - 50, this.staticShapePosition[1]], this.staticShapePosition[0], this.barCountPos);\n            }\n            staticShapes.push(this.addStaticShape(staticShapes.length));\n        } else {\n            for (let i = 0; i < staticShapes.length; i++) {\n                staticShapes[i] = new Bin(i + 1, [(this.staticShapePosition[0] * i) + 20, this.staticShapePosition[1]], this.binBounds, this.ballCountPos, this.countPos);\n            }\n        }\n\n        return staticShapes;\n    }\n\n    addMoveableShape(length) {\n        if(this.starsAndBars) {\n            return new Bar([this.moveableShapePosition[0] * (length + 1), this.moveableShapePosition[1]], this.barWidth, this.barHeight);\n        } else {\n            return new Ball(length + 1, [this.moveableShapePosition[0] * (length + 1), this.moveableShapePosition[1]], this.radius);\n        }\n    }\n\n    addStaticShape(length) {\n        if(this.starsAndBars) {\n            return new Star([this.staticShapePosition[0] * length - 50, this.staticShapePosition[1]], this.staticShapePosition[0], this.barCountPos);\n        } else {\n            return new Bin(length + 1, [(this.staticShapePosition[0] * (length)) + 20, this.staticShapePosition[1]], this.binBounds, this.ballCountPos, this.countPos);\n        }\n    }\n\n    changeLabels() {\n        let ballLabel = document.getElementById(\"ball-label-header\");\n        let binLabel = document.getElementById(\"bin-label-header\");\n\n        if (this.starsAndBars) {\n            ballLabel.innerText = \"Bars\";\n        } else {\n            ballLabel.innerText = \"Balls\";\n        }\n\n        if (this.starsAndBars) {\n            binLabel.innerText = \"Stars\";\n        } else {\n            binLabel.innerText = \"Bins\";\n        }\n    }\n\n    updateDisplayCount(value) {\n        if (this.starsAndBars) {\n            document.getElementsByClassName(\"num-balls\")[0].innerHTML = value - 1;\n        } else {\n            document.getElementsByClassName(\"num-balls\")[0].innerHTML = value + 1;\n        }\n    }\n}\n\nexport default Distribution;","import Display from './display';\nimport Tutorial from './tutorial';\nimport { determineFormula } from './../util/formulas';\nimport * as EventListeners from './../util/event_listeners';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const canvasEl = document.getElementById(\"canvas\");\n    const ctx = canvasEl.getContext(\"2d\");\n    const result = determineFormula(\"distinguishable\", \"distinguishable\", \"unrestricted\")(document.getElementsByClassName(\"num-balls\")[0].innerHTML, document.getElementsByClassName(\"num-bins\")[0].innerHTML);\n    const display = new Display(\"distinguishable\", \"distinguishable\", \"unrestricted\", result, ctx);\n    const tutorial = new Tutorial();\n    let animation;\n\n    if(window.innerWidth <= 1500) {\n        canvasEl.width = 775;\n        canvasEl.height = 505;  \n    } else if (window.innerWidth > 1500 && window.innerWidth <= 1850) {\n        canvasEl.width = 975;\n        canvasEl.height = 595;  \n    }\n\n    document.getElementsByClassName(\"darken-screen\")[0].addEventListener(\"click\", event => {\n        if(tutorial.currentStep === 15 || tutorial.currentStep === 26) {\n            tutorial.hideAllTutorials();\n        } else if(!tutorial.finishTutorial() && !tutorial.checkInteractiveStep() && !tutorial.checkSubmissionStep()) {\n                tutorial.nextStep();\n        }\n    });\n\n    document.getElementsByClassName(\"formulas\")[0].addEventListener(\"click\", event => {\n        if(!tutorial.finishTutorial() && tutorial.currentStep === 18) {\n            tutorial.nextStep();\n        }\n    });\n\n    document.getElementsByClassName(\"id unr\")[0].addEventListener(\"click\", event => {\n        if (!tutorial.finishTutorial() && tutorial.currentStep === 19) {\n            tutorial.nextStep();\n        }\n    });\n\n    canvasEl.addEventListener(\"mousedown\", event => {\n        for(let i = 0; i < display.interaction.moveableShapes.length; i++) {\n            if (display.interaction.moveableShapes[i].checkBounds(event.offsetX, event.offsetY)) {\n                animation = window.requestAnimationFrame(display.interaction.moveableShapes[i].draw);\n                display.interaction.moveableShapes[i].isClicked = true;\n                break; //break here to resolve conflict between overlapping balls\n                \n            }\n        }\n    });\n\n    canvasEl.addEventListener(\"mousemove\", event => {\n        display.interaction.moveableShapes.forEach(shape => {\n            if (shape.isClicked) {\n                ctx.clearRect(0, 0, canvasEl.clientWidth, canvasEl.height); //clear canvas to prevent trailing circles\n                shape.pos[0] = event.offsetX;\n                shape.pos[1] = event.offsetY;\n            }\n        });\n        display.start();\n    });\n\n    canvasEl.addEventListener(\"mouseup\", event => {\n        event.stopPropagation();\n        window.cancelAnimationFrame(animation);\n        ctx.clearRect(0, 0, canvasEl.clientWidth, canvasEl.height); //clear canvas to prevent trailing circles\n        display.interaction.moveableShapes.forEach(shape => {\n            let flag = false;\n            if (shape.isClicked) {\n                shape.isClicked = false;\n                display.interaction.staticShapes.forEach(otherShape => {\n                    otherShape.addItem(shape);\n                    otherShape.removeItem(shape);\n                    if(otherShape.items.length > 0) flag = true;\n                });\n\n                if(flag && !tutorial.finishTutorial()) {\n                    if(tutorial.checkInteractiveStep()) {\n                        tutorial.nextStep();\n                    }\n                }\n            }\n        });\n        display.start();\n    });\n\n    EventListeners.addEventsToRules(display);\n    EventListeners.addEventsToCases(display);\n    EventListeners.addEventsToButtons(display, tutorial);\n    display.updateCount(canvasEl);\n    display.start();\n});","import Configuration from './configuration';\nimport { determineCases, checkConstraints, checkIDSurjective } from '../util/checks';\nimport StaticShape from './static_shape';\nimport MoveableShape from './moveable_shape';\n\nclass Interaction {\n    constructor(moveableShapes, staticShapes) {\n        this.moveableShapes = moveableShapes;\n        this.staticShapes = staticShapes;\n        this.configurations = [];\n    }\n\n    setMoveableShapes(moveableShapes) {\n        this.moveableShapes = moveableShapes;\n    }\n\n    setStaticShapes(staticShapes) {\n        this.staticShapes = staticShapes;\n    }\n\n    addMoveableShape(moveableShape) {\n        this.moveableShapes.push(moveableShape);\n    }\n\n    removeMoveableShape() {\n        this.moveableShapes.pop();\n    }\n\n    addStaticShape(staticShape) {\n        this.staticShapes.push(staticShape);\n    }\n\n    removeStaticShape() {\n        this.staticShapes.pop();\n    }\n\n    violateRestriction(restriction) {\n        for(let i = 0; i < this.staticShapes.length; i++) {\n            if(!checkConstraints(restriction, this.staticShapes[i])) return true;\n        }\n\n        return false;\n    }\n\n    //this function checks if all balls are in the bins by checking if the total balls in bins equals to the total balls\n    checkMoveableShapes() {\n        return this.moveableShapes.length === this.staticShapes.reduce((acc, shape) => acc + shape.items.length, 0);\n    }\n\n    //checks if there exists a partition that is identical. Returns true if that's the case\n    checkEachConfiguration(moveableType, staticType) {\n        for (let i = 0; i < this.configurations.length; i++) {\n            if (this.configurations[i].checkStaticShapes(this.staticShapes, determineCases(moveableType, staticType))) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    addConfiguration(event, restriction, moveableType, staticType, starsAndBars) {\n        event.preventDefault();\n        if(this.checkEachConfiguration(moveableType, staticType) || !this.checkMoveableShapes()) return false;\n        if(starsAndBars && restriction === \"surjective\") {\n            if(!checkIDSurjective(this.staticShapes)) return false;\n        } else {\n            if(this.violateRestriction(restriction)) return false;\n        }\n\n        this.configurations.push(new Configuration(this.cloneStaticShapes()));\n        return true;\n    }\n\n    cloneStaticShapes() {\n        let newStaticShapes = [];\n        let newStaticShape;\n        let newMoveableShapes;\n\n        this.staticShapes.forEach(staticShape => {\n            newMoveableShapes = [];\n            staticShape.items.forEach(moveableShape => {\n                newMoveableShapes.push(Object.assign(Object.create(Object.getPrototypeOf(moveableShape)), moveableShape));\n            });\n            newStaticShape = Object.assign(Object.create(Object.getPrototypeOf(staticShape)), staticShape);\n            newStaticShape.items = newMoveableShapes;\n            newStaticShapes.push(newStaticShape);\n        });\n\n        return newStaticShapes;\n    }\n    \n    draw(ctx, moveableType, staticType) {\n        this.moveableShapes.forEach(shape => shape.draw(ctx, moveableType));\n        this.staticShapes.forEach(shape => shape.draw(ctx, staticType));\n    }\n}\n\nexport default Interaction;","class MoveableShape {\n    constructor(pos, boundingBox) {\n        this.pos = pos;\n        this.boundingBox = boundingBox;\n        this.isClicked = false;\n    }\n\n    checkBounds(x, y) {\n        let topLeft = (x >= this.boundingBox[0][0] && y >= this.boundingBox[0][1]);\n        let topRight = (x < this.boundingBox[1][0] && y >= this.boundingBox[1][1]);\n        let bottomRight = (x < this.boundingBox[2][0] && y < this.boundingBox[2][1]);\n        let bottomLeft = (x >= this.boundingBox[3][0] && y < this.boundingBox[3][1]);\n\n        return topLeft && topRight && bottomRight && bottomLeft;\n    }\n\n    recalculateBoundingBox() {}\n\n    draw(ctx) {}\n}\n\nexport default MoveableShape;","import StaticShape from './static_shape';\n\nclass Star extends StaticShape {\n    constructor(pos, gap, barCountPos) {\n        const boundingBox = [\n            [pos[0], pos[1] - 20],\n            [pos[0] + gap, pos[1] - 20],\n            [pos[0] + gap, pos[1] + 90],\n            [pos[0], pos[1] + 90]\n        ];\n        super(pos, boundingBox);\n        this.gap = gap;\n        this.barCountPos = barCountPos;\n    }\n\n    draw(ctx) {\n        if(typeof ctx === \"object\") {\n            ctx.beginPath();\n            ctx.moveTo(this.pos[0] - 5, this.pos[1] - 3);\n            ctx.lineTo(this.pos[0] + 4, this.pos[1] + 24);\n            ctx.lineTo(this.pos[0] + 35, this.pos[1] + 25);\n            ctx.lineTo(this.pos[0] + 9, this.pos[1] + 37);\n            ctx.lineTo(this.pos[0] + 20, this.pos[1] + 60);\n            ctx.lineTo(this.pos[0] - 5, this.pos[1] + 42);\n            ctx.lineTo(this.pos[0] - 27, this.pos[1] + 60);\n            ctx.lineTo(this.pos[0] - 19, this.pos[1] + 37);\n            ctx.lineTo(this.pos[0] - 45, this.pos[1] + 25);\n            ctx.lineTo(this.pos[0] - 14, this.pos[1] + 24);\n            ctx.closePath();\n            ctx.stroke();\n            ctx.fill();\n            ctx.fillText(this.items.length, this.pos[0] + this.barCountPos[0], this.pos[1] + this.barCountPos[1]);\n        }\n    }\n}\n\nexport default Star;","class StaticShape {\n    constructor(pos, boundingBox) {\n        this.pos = pos;\n        this.boundingBox = boundingBox;\n        this.items = [];\n    }\n\n    checkBounds(x, y) {\n        let topLeft = (x >= this.boundingBox[0][0] && y >= this.boundingBox[0][1]);\n        let topRight = (x < this.boundingBox[1][0] && y >= this.boundingBox[1][1]);\n        let bottomRight = (x < this.boundingBox[2][0] && y < this.boundingBox[2][1]);\n        let bottomLeft = (x >= this.boundingBox[3][0] && y < this.boundingBox[3][1]);\n\n        return topLeft && topRight && bottomRight && bottomLeft;\n    }\n\n    checkItem(item) {\n        let bound1 = this.checkBounds(item.boundingBox[0][0], item.boundingBox[0][1]);\n        let bound2 = this.checkBounds(item.boundingBox[1][0], item.boundingBox[1][1]);\n        let bound3 = this.checkBounds(item.boundingBox[2][0], item.boundingBox[2][1]);\n        let bound4 = this.checkBounds(item.boundingBox[3][0], item.boundingBox[3][1]);\n\n        return bound1 || bound2 || bound3 || bound4;\n    }\n\n    addItem(item) {\n        if(!this.items.includes(item) && this.checkItem(item)) {\n            this.items.push(item);\n        }\n    }\n\n    removeItem(item) {\n        if (this.items.includes(item) && !this.checkItem(item)) {\n            let index = this.items.indexOf(item);\n            this.items.splice(index, 1);\n        }\n    }\n\n    recalculateBoundingBox() {}\n\n    draw(ctx) {}\n}\n\nexport default StaticShape;","class Tutorial {\n    constructor() {\n        this.currentStep = 1;\n        this.totalSteps = 33;\n    }\n\n    finishTutorial() {\n        return this.currentStep > this.totalSteps;\n    }\n\n    checkInteractiveStep() {\n        return [6, 7, 10, 18, 19, 23].includes(this.currentStep);\n    }\n\n    checkSubmissionStep() {\n        return [8, 11, 24].includes(this.currentStep);\n    }\n\n    removeDarkScreen() {\n        if (document.getElementsByClassName(\"darken-screen\")[0]) {\n            document.getElementsByClassName(\"darken-screen\")[0].classList.remove(\"darken-screen\");\n        }\n    }\n\n    addDarkScreen() {\n        if (!document.getElementsByClassName(\"darken-screen\")[0]) {\n            document.getElementsByTagName(\"body\")[0].classList.add(\"darken-screen\");\n        }\n    }\n\n    modifyScreen() {\n        if(this.checkInteractiveStep() || this.checkSubmissionStep()) {\n            this.removeDarkScreen();\n        } else {\n            this.addDarkScreen();\n        }\n    }\n\n    hideAllTutorials() {\n        document.getElementById(`step-${this.currentStep}`).classList.add(\"hidden\");\n        this.removeDarkScreen();\n    }\n\n    nextStep() {\n        document.getElementById(`step-${this.currentStep}`).classList.add(\"hidden\");\n        this.currentStep++;\n\n        if(this.finishTutorial()) {\n            document.getElementsByTagName(\"body\")[0].classList.remove(\"darken-screen\");\n        } else {\n            document.getElementById(`step-${this.currentStep}`).classList.remove(\"hidden\");\n            this.modifyScreen();\n        }\n\n    }\n}\n\nexport default Tutorial;","export const determineCases = (moveableType, staticType) => {\n\n    if (moveableType.toLowerCase() === \"distinguishable\") {\n        if (staticType.toLowerCase() === \"distinguishable\") {\n            return (shape1, shape2, i) => {\n                return checkForSimilarShapes(shape1.items, shape2[i].items);\n            }\n        } else if (staticType.toLowerCase() === \"indistinguishable\") {\n            return (shape1, shape2) => {\n                return checkAgainstOtherShapes(shape1.items, shape2, checkForSimilarShapes);\n            }\n        }\n    } else if (moveableType.toLowerCase() === \"indistinguishable\") {\n        if (staticType.toLowerCase() === \"distinguishable\") {\n            return (shape1, shape2, i) => {\n                return checkTotalShapes(shape1.items, shape2[i].items);\n            }\n        } else if (staticType.toLowerCase() === \"indistinguishable\") {\n            return (shape1, shape2) => {\n                return checkAgainstOtherShapes(shape1.items, shape2, checkForSimilarLength);\n            }\n        }\n    }\n}\n\n//only if the bins are distinguishable, and balls are indistinguishable, check count of bins\nconst checkTotalShapes = (items1, items2) => {\n    return items1.length === items2.length;\n}\n\n// For a given order of balls, check against other bins in a partition \n// if there exist similar order.\nconst checkAgainstOtherShapes = (items, otherShapes, checkCallback) => {\n    for (let i = 0; i < otherShapes.length; i++) {\n        if (checkCallback(items, otherShapes[i].items)) return true;\n    }\n\n    return false;\n}\n\n//this function checks if two bins have the same balls, but not necessarily in order\nconst checkForSimilarShapes = (items1, items2) => {\n    if (items1.length !== items2.length) return false;\n\n    let labels = {};\n    for(let i = 0; i < items2.length; i++) {\n        labels[items2[i].label] = items2[i].label;\n    }\n\n    for (let i = 0; i < items1.length; i++) {\n        if (!Boolean(labels[items1[i].label])) return false; \n    }\n\n    return true; //return true if the order is the same for both bins\n}\n\n//this function checks if two bins have the same amount of balls, regardless of their labels\nconst checkForSimilarLength = (items1, items2) => {\n    return items1.length === items2.length;\n}\n\nexport const checkConstraints = (restriction, shape) => {\n    if (restriction.toLowerCase() === \"injective\") {\n        return checkInjective(shape);\n    } else if (restriction.toLowerCase() === \"surjective\") {\n        return checkSurjective(shape);\n    } else {\n        return true;\n    }\n};\n\nexport const checkIDSurjective = (shapes) => {\n    if (shapes[0].items.length > 0 || shapes[shapes.length - 1].items.length > 0) return false;\n    for(let i = 1; i < shapes.length - 1; i++) {\n        if(!checkInjective(shapes[i])) return false;\n    }\n\n    return true;\n};\n\n//if a bin has at most one ball\nconst checkInjective = (shape) => {\n    if (shape.items.length <= 1) {\n        return true;\n    } else {\n        return false;\n    }\n};\n\n//if a bin has at least one ball\nconst checkSurjective = (shape) => {\n    if (shape.items.length > 0) {\n        return true;\n    } else {\n        return false;\n    }\n}","import { findDDUConfiguration } from './../util/search_configuration';\n\nexport const addEventsToCases = (display) => {\n    let case1 = document.getElementsByClassName(\"dd\");\n    let case2 = document.getElementsByClassName(\"di\");\n    let case3 = document.getElementsByClassName(\"id\");\n    let case4 = document.getElementsByClassName(\"ii\");\n    const moveableType = document.getElementsByClassName(\"moveable-type\")[0];\n    const staticType = document.getElementsByClassName(\"static-type\")[0];\n\n    for (let i = 0; i < case1.length; i++) {\n        case1[i].addEventListener(\"click\", event => {\n            display.moveableType = \"distinguishable\";\n            display.staticType = \"distinguishable\";\n            moveableType.innerHTML = \"Ball/Bar type: Distinguishable\";\n            staticType.innerHTML = \"Bin/Star type: Distinguishable\";\n            display.restart();\n        });\n\n        case2[i].addEventListener(\"click\", event => {\n            display.moveableType = \"distinguishable\";\n            display.staticType = \"indistinguishable\";\n            moveableType.innerHTML = \"Ball/Bar type: Distinguishable\";\n            staticType.innerHTML = \"Bin/Star type: Indistinguishable\";\n            display.restart();\n        });\n\n        case3[i].addEventListener(\"click\", event => {\n            display.moveableType = \"indistinguishable\";\n            display.staticType = \"distinguishable\";\n            moveableType.innerHTML = \"Ball/Bar type: Indistinguishable\";\n            staticType.innerHTML = \"Bin/Star type: Distinguishable\";\n            display.restart();\n        });\n\n        case4[i].addEventListener(\"click\", event => {\n            display.moveableType = \"indistinguishable\";\n            display.staticType = \"indistinguishable\";\n            moveableType.innerHTML = \"Ball/Bar type: Indistinguishable\";\n            staticType.innerHTML = \"Bin/Star type: Indistinguishable\";\n            display.restart();\n        });\n    }\n}\n\nexport const addEventsToRules = (display) => {\n    let rule1 = document.getElementsByClassName(\"unr\");\n    let rule2 = document.getElementsByClassName(\"inj\");\n    let rule3 = document.getElementsByClassName(\"sur\");\n    const restriction = document.getElementsByClassName(\"restriction\")[0];\n\n    for (let i = 0; i < rule1.length; i++) {\n        rule1[i].addEventListener(\"click\", event => {\n            display.restriction = \"unrestricted\";\n            restriction.innerHTML = \"Restriction: Unrestricted\";\n        })\n        rule2[i].addEventListener(\"click\", event => {\n            display.restriction = \"injective\";\n            restriction.innerHTML = \"Restriction: Injective\";\n        })\n        rule3[i].addEventListener(\"click\", event => {\n            display.restriction = \"surjective\";\n            restriction.innerHTML = \"Restriction: Surjective\";\n        })\n    }\n}\n\nexport const addEventsToButtons = (display, tutorial) => {\n    document.getElementsByClassName(\"reset-state\")[0].addEventListener(\"click\", event => {\n        display.resetState();\n        display.start();\n    });\n\n    document.getElementsByClassName(\"reset-problem\")[0].addEventListener(\"click\", event => {\n        display.resetInterface();\n        display.addToConfigurations();\n        display.start();\n    });\n\n    document.getElementsByClassName(\"submit-config\")[0].addEventListener(\"submit\", event => {\n        if (display.interaction.addConfiguration(event, display.restriction, display.moveableType, display.staticType, display.distribution.starsAndBars)) {\n            if(tutorial.checkSubmissionStep()) {\n                tutorial.nextStep();\n            }\n            display.addToConfigurations();\n            appendPartition(display);\n            checkCompletion(display, tutorial);\n        } else {\n            document.getElementsByClassName(\"error-msg\")[0].classList.add(\"pop-up\");\n            setTimeout(() => document.getElementsByClassName(\"error-msg\")[0].classList.remove(\"pop-up\"), 3000);\n        }\n    });\n\n    document.getElementsByClassName(\"choose\")[0].addEventListener(\"click\", event => {\n        event.stopImmediatePropagation();\n        removeFadeIn();\n        display.resetInterface();\n        display.addToConfigurations();\n        display.start();\n    });\n\n    document.getElementsByClassName(\"choose\")[1].addEventListener(\"click\", event => {\n        removeFadeIn();\n        document.getElementById(\"formulas\").scrollIntoView();\n    });\n\n    // document.getElementsByClassName(\"show-solution\")[0].addEventListener(\"click\", event => {\n    //     let binsArray = [];\n    //     for(let i = 0; i < display.interaction.staticShapes.length; i++) {\n    //         binsArray.push([]);\n    //     }\n    //     console.log(findDDUConfiguration(display.interaction.moveableShapes, display.interaction.staticShapes.length, binsArray));\n    // })\n}\n\nconst checkCompletion = (display, tutorial) => {\n    if (display.interaction.configurations.length === display.totalConfigurations) {\n        if(tutorial.finishTutorial()) {\n            document.getElementsByClassName(\"submit\")[0].setAttribute(\"disabled\", \"true\");\n            document.getElementsByClassName(\"submit\")[0].classList.add(\"not-allowed\");\n            document.getElementsByClassName(\"all-configurations\")[0].classList.add(\"fade-in\");\n            setTimeout(() => document.getElementsByClassName(\"try-again\")[0].classList.add(\"fade-in\"), 2000);\n            setTimeout(() => document.getElementsByClassName(\"choose\")[0].classList.add(\"fade-in\"), 4000);\n            setTimeout(() => document.getElementsByClassName(\"choose\")[1].classList.add(\"fade-in\"), 4000);\n        } else {\n            tutorial.nextStep();\n        }\n    }\n};\n\nconst removeFadeIn = () => {\n    document.getElementsByClassName(\"submit\")[0].removeAttribute(\"disabled\");\n    document.getElementsByClassName(\"submit\")[0].classList.remove(\"not-allowed\");\n    document.getElementsByClassName(\"all-configurations\")[0].classList.remove(\"fade-in\");\n    document.getElementsByClassName(\"try-again\")[0].classList.remove(\"fade-in\");\n    document.getElementsByClassName(\"choose\")[0].classList.remove(\"fade-in\");\n    document.getElementsByClassName(\"choose\")[1].classList.remove(\"fade-in\");\n}\n\nconst appendPartition = (display) => {\n    const newCanvas = document.createElement(\"CANVAS\");\n    newCanvas.classList.add(\"configuration\");\n    let subtractHeight = 0;\n\n    if(window.innerWidth <= 1500) {\n        newCanvas.setAttribute(\"width\", \"190\");\n        subtractHeight = 51;\n    } else if (window.innerWidth > 1500 && window.innerWidth <= 1850) {\n        newCanvas.setAttribute(\"width\", \"216\");\n        subtractHeight = 40;\n    } else {\n        newCanvas.setAttribute(\"width\", \"290\");\n    }\n    const ctx = newCanvas.getContext(\"2d\");\n    \n    let length = display.interaction.configurations.length;\n    let y = scaleNewCanvas(display, ctx, newCanvas, subtractHeight);\n    display.interaction.configurations[length - 1].draw(ctx, display.moveableType, display.staticType, y);\n    document.getElementsByClassName(\"history\")[0].scrollTop = document.getElementsByClassName(\"history\")[0].lastChild.offsetTop;\n}\n\nconst scaleNewCanvas = (display, ctx, newCanvas, subtractHeight) => {\n    const length = display.interaction.staticShapes.length;\n    const history = document.getElementsByClassName(\"history\")[0];\n    let height;\n\n    if(length === 1 || length === 2) {\n        height = 275 - subtractHeight;\n        newCanvas.setAttribute(\"height\", height);\n        ctx.scale(0.5, 0.5);\n        history.appendChild(newCanvas);\n        return newCanvas.getBoundingClientRect().height - 150;\n    } else if (length === 3) {\n        height = 225 - subtractHeight;\n        newCanvas.setAttribute(\"height\", height);\n        ctx.scale(0.4, 0.4);\n        history.appendChild(newCanvas);\n        return newCanvas.getBoundingClientRect().height - 100;\n    } else if (length === 4) {\n        height = 175 - subtractHeight;\n        newCanvas.setAttribute(\"height\", height);\n        ctx.scale(0.3, 0.3);\n        history.appendChild(newCanvas);\n        return newCanvas.getBoundingClientRect().height - 50;\n    } else {\n        height = 125 - subtractHeight;\n        newCanvas.setAttribute(\"height\", height);\n        ctx.scale(0.24, 0.24);\n        history.appendChild(newCanvas);\n        return newCanvas.getBoundingClientRect().height;\n    }\n};","//function naming convention: First character is label (Distinguishable or Indistinguishable) of ball, second character is label of bin, last word is rules\n\nexport const determineFormula = (ballType, binType, rules) => {\n    switch(ballType) {\n        case \"distinguishable\":\n            switch(binType) {\n                case \"distinguishable\":\n                    switch(rules) {\n                        case \"unrestricted\":\n                            return calculateDDUnrestricted;\n                        case \"injective\":\n                            return calculateDDInjective;\n                        case \"surjective\":\n                            return calculateDDSurjective;\n                    }\n                case \"indistinguishable\":\n                    switch(rules) {\n                        case \"unrestricted\":\n                            return calculateDIUnrestricted;\n                        case \"injective\":\n                            return calculateDIInjective;\n                        case \"surjective\":\n                            return calculateDISurjective;\n                    }\n            }\n        case \"indistinguishable\":\n            switch (binType) {\n                case \"distinguishable\":\n                    switch (rules) {\n                        case \"unrestricted\":\n                            return calculateIDUnrestricted;\n                        case \"injective\":\n                            return calculateIDInjective;\n                        case \"surjective\":\n                            return calculateIDSurjective;\n                    }\n                case \"indistinguishable\":\n                    switch (rules) {\n                        case \"unrestricted\":\n                            return calculateIIUnrestricted;\n                        case \"injective\":\n                            return calculateIIInjective;\n                        case \"surjective\":\n                            return calculateIISurjective;\n                    }\n            }\n        default:\n            return null;\n    };\n};\n\n//k distinguishable balls, n distinguishable bins, no restrictions\nconst calculateDDUnrestricted = (k, n) => {\n    return Math.pow(n, k);\n};\n\n//k distinguishable balls, n distinguishable bins, injective\nconst calculateDDInjective = (k, n) => {\n    if(k > n) return 0;\n\n    return calculateFactorial(n) / calculateFactorial(n-k);\n};\n\n//k distinguishable balls, n distinguishable bins, surjective\nconst calculateDDSurjective = (k, n) => {\n    return calculateStirlingNumber(k, n) * calculateFactorial(n);\n};\n\n//k indistinguishable balls, n distinguishable bins, no restrictions\nconst calculateIDUnrestricted = (k, n) => {\n    k += 1; //since I removed one less bar than usual\n    n -= 1; //since I added one more star than usual\n    return calculateBinomialCoefficient(n + k - 1, k - 1);\n};\n\n//k indistinguishable balls, n distinguishable bins, injective\nconst calculateIDInjective = (k, n) => {\n    return calculateBinomialCoefficient(n, k);\n};\n\n//k indistinguishable balls, n distinguishable bins, surjective\nconst calculateIDSurjective = (k, n) => {\n    k += 1;\n    n -= 1;\n    return calculateBinomialCoefficient(n - 1, k - 1);\n};\n\n//k distinguishable balls, n indistinguishable bins, no restrictions\nconst calculateDIUnrestricted = (k, n) => {\n    let numbers = getNumbersArray(n);\n    let formula = (acc, i) => acc + calculateStirlingNumber(k, i)\n    return numbers.reduce(formula, 0);\n};\n\n//k distinguishable balls, n indistinguishable bins, injective\nconst calculateDIInjective = (k, n) => {\n    if(k <= n) {\n        return 1;\n    } else {\n        return 0;\n    }\n};\n\n//k distinguishable balls, n indistinguishable bins, surjective\nconst calculateDISurjective = (k, n) => {\n    return calculateStirlingNumber(k, n);\n};\n\n//k indistinguishable balls, n indistinguishable bins, no restrictions\nconst calculateIIUnrestricted = (k, n) => {\n    let numbers = getNumbersArray(n);\n    let formula = (acc, i) => acc + calculatePartition(k, i)\n    return numbers.reduce(formula, 0);\n};\n\n//k indistinguishable balls, n indistinguishable bins, injective\nconst calculateIIInjective = (k, n) => {\n    if (k <= n) {\n        return 1;\n    } else {\n        return 0;\n    }\n};\n\n//k indistinguishable balls, n indistinguishable bins, surjective\nconst calculateIISurjective = (k, n) => {\n    return calculatePartition(k, n);\n};\n\n//calculated using recurrence relation P(n,k)=P(n-1,k-1)+P(n-k,k) <- by wolfram mathworld\n//k and n will be reversed because we use k balls and n bins\nconst calculatePartition = (k, n) => {\n    if (k === n) {\n        return 1;\n    }\n    \n    if (k <= 0 || n <= 0) {\n        return 0;\n    }\n\n    return calculatePartition(k - 1, n - 1) + calculatePartition(k - n, n);\n}\n\nconst calculateStirlingNumber = (n, k) => {\n    let numbers = getNumbersArray(k);\n    let formula = (acc, i) => acc + (Math.pow(-1, i) * calculateBinomialCoefficient(k, i) * Math.pow(k - i, n))\n    let sumResults = numbers.reduce(formula, 0);\n\n    return (1/calculateFactorial(k)) * sumResults;\n};\n\nconst calculateBinomialCoefficient = (n, k) => {\n    return Math.floor(calculateFactorial(n) / (calculateFactorial(n-k) * calculateFactorial(k)));\n};\n\nconst calculateFactorial = (n) => {\n    let total = 1;\n    while(n > 0) {\n        total *= n;\n        n -= 1;\n    }\n    return total;\n}\n\nconst getNumbersArray = (n) => {\n    let numbers = new Array(n + 1);\n    for (let i = 0; i < numbers.length; i++) {\n        numbers[i] = i;\n    }\n    return numbers;\n}","import Bin from './../src/bin';\n\nexport const findDDUConfiguration = (moveableShapes, staticLength, binsArray) => {\n    if(moveableShapes.length === 0) {\n        return createBins(binsArray);   \n    }\n\n    let configurations = [];\n\n    for(let i = 0; i < staticLength; i++) {\n        binsArray = refreshBins(binsArray);\n        for(let j = 0; j < moveableShapes.length; j++) {\n            binsArray[i].push(moveableShapes[j]);\n            configurations.push(findDDUConfiguration(moveableShapes.slice(1), staticLength, binsArray));\n        }\n    }\n\n    return configurations;\n}\n\nexport const findDDIConfiguration = (moveableShapes, staticShapes, idx) => {\n    if(moveableShapes.length === 0) return staticShapes;\n\n    let configurations = [];\n\n    for (let i = idx; i < staticShapes.length; i++) {\n        for (let j = 0; j < moveableShapes.length; j++) {\n            staticShapes[i].addItem(moveableShapes[j]);\n            configurations.push(findDDIConfiguration(moveableShapes.slice(1), staticShapes, i+1));\n        }\n    }\n\n    return configurations;\n}\n\nconst refreshBins = (bins) => {\n    let binsArray = [];\n    for (let i = 0; i < bins.length; i++) {\n        binsArray.push([]);\n    }\n    return binsArray;\n}\n\nconst createBins = (bins) => {\n    let newBins = [];\n    let newBin;\n\n    for(let i = 0; i < bins.length; i++) {\n        newBin = new Bin(i + 1, [245, 440], [40, 160, 300]);\n        newBin.items = bins[i].slice();\n        newBins.push(newBin);\n    }\n\n    return newBins;\n};\n\n\n\n//essentially you iterate\n\n/*\n\n1 2 3 4\n*/\n\n\n"],"sourceRoot":""}